<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Змейка</title>
	<style>
	html,
	body {
		height: 100%;
		margin: 0;
	}

	/*Задаём глобальные параметры*/
	body {
		background: black;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	/*Делаем границу вокруг игрового поля*/
	canvas {
		border: 1px solid white;
	}
</style>
</head>
<body>
	<!--Рисуем игровое поле-->
	<canvas width="400" height="400" id="game"></canvas>
	<!--Сам скрипт с игрой-->
	<script>
		//Поле, на котором всё будет происходить
		var canvas = document.getElementById('game');
		//Классическая змейка 2Д
		var context = canvas.getContext('2d');
		//Размер одной клетки на поле- 16 пикселей
		var grid = 16;
		//Служебная переменная,скорость змейки
		var count = 0;
		//А вот и сама змейка
		var snake = {
			x: 160,
			y: 160,
			//Скорость змейки - в каждом новом кадре змейка смещается по оси Х или У. На старте будет двигаться горизонтально.
			dx: grid,
			dy: 0,
			//Тащим за собой хвост-пока пустой
			cells:[],
			//Стартовая длина змейки - 4 клетки
			maxCells: 4
		};
		//Еда- это красные яблоки.
		var apple = {
			//Начальные координаты
			x: 320,
			y: 320
		};
		//Делаем генератор случайных чисел в заданном диапазоне
		function getRandomInt(min,max){
			return Math.floor(Math.random() * (max-min)) + min;
		}
		//Игровой цикл-основной процесс в котором всё будет происходить
		function loop() {
			requestAnimationFrame(loop);
			if (++count < 4) {
				return;
			}
			count = 0;
			context.clearRect(0,0,canvas.width,canvas.height);
			snake.x += snake.dx;
			snake.y += snake.dy;
			if (snake.x < 0) {
				snake.x = canvas.width - grid;
			}
			else if (snake.x >= canvas.width) {
				snake.x = 0
			}
			if (snake.y < 0) {
				snake.y = canvas.height - grid;
			}
			else if (snake.y >= canvas.height) {
				snake.y = 0
			}
			snake.cells.unshift({x: snake.x, y:snake.y});

		}
	</script>
</body>
</html>
